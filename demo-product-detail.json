{
  "version": "1.0",
  "meta": {
    "name": "product-detail",
    "description": "商品详情页演示"
  },
  "componentTree": {
    "id": "root",
    "component": "Page",
    "props": {},
    "styles": {},
    "children": [
      {
        "id": "scroll1",
        "component": "ScrollView",
        "props": {
          "scrollY": true
        },
        "styles": {
          "height": "100vh",
          "backgroundColor": "#f5f5f5"
        },
        "children": [
          {
            "id": "productCard",
            "component": "View",
            "props": {},
            "styles": {
              "backgroundColor": "#ffffff",
              "padding": "16px",
              "margin": "16px",
              "borderRadius": "8px"
            },
            "children": [
              {
                "id": "productImage",
                "component": "Image",
                "props": {
                  "src": "{{productData[0].image}}",
                  "fit": "cover"
                },
                "styles": {
                  "width": "100%",
                  "height": "300px",
                  "borderRadius": "4px"
                },
                "children": []
              },
              {
                "id": "productName",
                "component": "Text",
                "props": {
                  "content": "{{productData[0].name}}"
                },
                "styles": {
                  "fontSize": "20px",
                  "fontWeight": "bold",
                  "marginTop": "12px",
                  "color": "#333333"
                },
                "children": []
              },
              {
                "id": "productPrice",
                "component": "Text",
                "props": {
                  "content": "¥{{productData[0].price}}"
                },
                "styles": {
                  "fontSize": "24px",
                  "color": "#ff4d4f",
                  "marginTop": "8px",
                  "fontWeight": "bold"
                },
                "children": []
              },
              {
                "id": "productDesc",
                "component": "Text",
                "props": {
                  "content": "{{productData[0].description}}"
                },
                "styles": {
                  "fontSize": "14px",
                  "color": "#666666",
                  "marginTop": "12px",
                  "lineHeight": "1.6"
                },
                "children": []
              }
            ]
          },
          {
            "id": "reviewsCard",
            "component": "View",
            "props": {},
            "styles": {
              "backgroundColor": "#ffffff",
              "padding": "16px",
              "margin": "16px",
              "borderRadius": "8px"
            },
            "children": [
              {
                "id": "reviewsHeader",
                "component": "View",
                "props": {},
                "styles": {
                  "display": "flex",
                  "justifyContent": "space-between",
                  "alignItems": "center",
                  "marginBottom": "12px"
                },
                "children": [
                  {
                    "id": "reviewsTitle",
                    "component": "Text",
                    "props": {
                      "content": "用户评论"
                    },
                    "styles": {
                      "fontSize": "16px",
                      "fontWeight": "bold",
                      "color": "#333333"
                    },
                    "children": []
                  },
                  {
                    "id": "reviewsSwitch",
                    "component": "Switch",
                    "props": {
                      "checked": "{{showReviews}}"
                    },
                    "styles": {},
                    "events": {
                      "onChange": [
                        {
                          "type": "setState",
                          "target": "showReviews",
                          "value": "e.detail.value"
                        }
                      ]
                    },
                    "children": []
                  }
                ]
              },
              {
                "id": "reviewsList",
                "component": "List",
                "props": {},
                "styles": {},
                "loop": {
                  "dataVar": "reviewsData",
                  "itemVar": "review"
                },
                "condition": {
                  "expression": "showReviews"
                },
                "children": [
                  {
                    "id": "reviewCard",
                    "component": "Card",
                    "props": {},
                    "styles": {
                      "marginBottom": "8px",
                      "backgroundColor": "#f9f9f9"
                    },
                    "children": [
                      {
                        "id": "reviewEmail",
                        "component": "Text",
                        "props": {
                          "content": "{{$item.email}}"
                        },
                        "styles": {
                          "fontSize": "14px",
                          "fontWeight": "bold",
                          "color": "#1890ff"
                        },
                        "children": []
                      },
                      {
                        "id": "reviewBody",
                        "component": "Text",
                        "props": {
                          "content": "{{$item.body}}"
                        },
                        "styles": {
                          "fontSize": "12px",
                          "color": "#666666",
                          "marginTop": "4px",
                          "lineHeight": "1.5"
                        },
                        "children": []
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "id": "buyForm",
            "component": "Form",
            "props": {},
            "styles": {
              "backgroundColor": "#ffffff",
              "padding": "16px",
              "margin": "16px",
              "borderRadius": "8px"
            },
            "events": {
              "onSubmit": [
                {
                  "type": "submitForm",
                  "url": "https://jsonplaceholder.typicode.com/posts",
                  "method": "POST",
                  "fields": [
                    "buyerName",
                    "buyerPhone",
                    "quantity"
                  ],
                  "successMessage": "订单提交成功！",
                  "errorMessage": "订单提交失败，请重试"
                }
              ]
            },
            "children": [
              {
                "id": "formTitle",
                "component": "Text",
                "props": {
                  "content": "立即购买"
                },
                "styles": {
                  "fontSize": "16px",
                  "fontWeight": "bold",
                  "marginBottom": "12px",
                  "color": "#333333"
                },
                "children": []
              },
              {
                "id": "nameInput",
                "component": "Input",
                "props": {
                  "placeholder": "请输入姓名"
                },
                "styles": {
                  "marginBottom": "12px"
                },
                "events": {
                  "onChange": [
                    {
                      "type": "setState",
                      "target": "buyerName",
                      "value": "e.detail.value"
                    }
                  ]
                },
                "children": []
              },
              {
                "id": "phoneInput",
                "component": "Input",
                "props": {
                  "placeholder": "请输入电话",
                  "type": "number"
                },
                "styles": {
                  "marginBottom": "12px"
                },
                "events": {
                  "onChange": [
                    {
                      "type": "setState",
                      "target": "buyerPhone",
                      "value": "e.detail.value"
                    }
                  ]
                },
                "children": []
              },
              {
                "id": "quantityRow",
                "component": "View",
                "props": {},
                "styles": {
                  "display": "flex",
                  "alignItems": "center",
                  "marginBottom": "12px"
                },
                "children": [
                  {
                    "id": "quantityLabel",
                    "component": "Text",
                    "props": {
                      "content": "数量："
                    },
                    "styles": {
                      "fontSize": "14px",
                      "marginRight": "8px",
                      "color": "#333333"
                    },
                    "children": []
                  },
                  {
                    "id": "decreaseBtn",
                    "component": "Button",
                    "props": {
                      "size": "small"
                    },
                    "styles": {},
                    "events": {
                      "onClick": [
                        {
                          "type": "setState",
                          "target": "quantity",
                          "value": "Math.max(1, quantity - 1)"
                        }
                      ]
                    },
                    "children": [
                      {
                        "id": "decreaseText",
                        "component": "Text",
                        "props": {
                          "content": "-"
                        },
                        "styles": {},
                        "children": []
                      }
                    ]
                  },
                  {
                    "id": "quantityDisplay",
                    "component": "Text",
                    "props": {
                      "content": "{{quantity}}"
                    },
                    "styles": {
                      "fontSize": "16px",
                      "margin": "0 12px",
                      "fontWeight": "bold",
                      "color": "#333333"
                    },
                    "children": []
                  },
                  {
                    "id": "increaseBtn",
                    "component": "Button",
                    "props": {
                      "size": "small"
                    },
                    "styles": {},
                    "events": {
                      "onClick": [
                        {
                          "type": "setState",
                          "target": "quantity",
                          "value": "quantity + 1"
                        }
                      ]
                    },
                    "children": [
                      {
                        "id": "increaseText",
                        "component": "Text",
                        "props": {
                          "content": "+"
                        },
                        "styles": {},
                        "children": []
                      }
                    ]
                  }
                ]
              },
              {
                "id": "submitBtn",
                "component": "Button",
                "props": {
                  "type": "primary"
                },
                "styles": {
                  "width": "100%"
                },
                "children": [
                  {
                    "id": "submitText",
                    "component": "Text",
                    "props": {
                      "content": "提交订单"
                    },
                    "styles": {},
                    "children": []
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "dataSources": [
    {
      "id": "product",
      "name": "商品信息",
      "type": "api",
      "options": {
        "url": "/api/products/1",
        "method": "GET"
      },
      "autoFetch": true,
      "mockData": {
        "data": {
          "data": {
            "data": [
              {
                "id": 1,
                "name": "iPhone 15 Pro",
                "price": 7999,
                "image": "https://via.placeholder.com/300x300/4A90E2/ffffff?text=iPhone+15+Pro",
                "description": "全新 A17 Pro 芯片，钛金属设计，专业级摄像系统",
                "stock": 50
              }
            ]
          }
        }
      }
    },
    {
      "mockData": {
        "data": {
          "data": null
        }
      }
    }
  ],
  "formStates": [
    {
      "id": "quantity",
      "type": "number",
      "defaultValue": 1
    },
    {
      "id": "showReviews",
      "type": "boolean",
      "defaultValue": true
    },
    {
      "id": "buyerName",
      "type": "string",
      "defaultValue": ""
    },
    {
      "id": "buyerPhone",
      "type": "string",
      "defaultValue": ""
    }
  ]
}
